{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kkdh1\\\\Desktop\\\\Capstone\\\\client\\\\src\\\\components\\\\Upload\\\\Upload.js\";\nimport React, { Component } from 'react';\nimport { Bootstrap, Grid, Row, Col } from 'react-bootstrap';\nimport Firebase from 'firebase';\nimport firebase from '../../firebase';\n\nclass Upload extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      const state = this.state;\n      state[e.target.name] = e.target.value;\n      this.setState(state);\n    };\n\n    this.handleChange = e => {\n      if (e.target.files[0]) {\n        this.setState({\n          image: e.target.files[0]\n        });\n      }\n\n      console.log(e.target.files[0]);\n    };\n\n    this.handleUpload = e => {\n      e.preventDefault(); // const {image} = this.state;\n      // const uploadTask = firebase.storage().ref(`closet/${image.name}`).put(this.state.image)\n      // uploadTask.on('state_changed', (snapshot) =>{console.log(snapshot)},\n      // (err) => {console.log(err);},\n      // () => {firebase.storage().ref('closet').child(image.name).getDownloadURL().then(url => {\n      //   this.setState({url});\n      // })})\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      const {\n        image\n      } = this.state;\n      const uploadTask = firebase.storage().ref(`closet/${image.name}`).put(this.state.image);\n      uploadTask.on('state_changed', snapshot => {\n        console.log(snapshot);\n      }, err => {\n        console.log(err);\n      }, //target storage, and folder to get url => setState url\n      () => {\n        firebase.storage().ref('closet').child(image.name).getDownloadURL().then(url => {\n          this.setState({\n            url\n          });\n          console.log(url);\n        });\n      }).then(url => {\n        const {\n          name,\n          style,\n          color\n        } = this.state;\n        this.ref.add({\n          name,\n          style,\n          color,\n          url: this.state.url\n        }).then(docRef => {\n          this.setState({\n            name: '',\n            style: '',\n            url: ''\n          }); // console.log(this.props)\n          // console.log(this.state.url)\n          // this.props.history.push(\"/\")\n        }).catch(error => {\n          console.error(\"error adding document\", error);\n        });\n      });\n    };\n\n    this.ref = firebase.firestore().collection('closet');\n    this.state = {\n      image: null,\n      style: '',\n      color: '',\n      url: '',\n      name: ''\n    };\n  }\n\n  render() {\n    const {\n      name,\n      style,\n      color\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"color\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, \"Color\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-color\",\n      name: \"color\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"style\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, \"style\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-style\",\n      name: \"style\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"upload-img\",\n      type: \"file\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"upload-cancel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"upload-submit-img\",\n      onClick: this.handleUpload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }, \"Upload Image First\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"upload-submit\",\n      onClick: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, \"Submit\")));\n  }\n\n}\n\nexport default Upload;","map":{"version":3,"sources":["C:/Users/kkdh1/Desktop/Capstone/client/src/components/Upload/Upload.js"],"names":["React","Component","Bootstrap","Grid","Row","Col","Firebase","firebase","Upload","constructor","props","onChange","e","state","target","name","value","setState","handleChange","files","image","console","log","handleUpload","preventDefault","onSubmit","uploadTask","storage","ref","put","on","snapshot","err","child","getDownloadURL","then","url","style","color","add","docRef","catch","error","firestore","collection","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport {Bootstrap, Grid, Row, Col} from 'react-bootstrap';\r\nimport Firebase from 'firebase';\r\nimport firebase from '../../firebase';\r\n\r\nclass Upload extends Component {\r\n  constructor (props) {\r\n    super (props);\r\n    this.ref=firebase.firestore().collection('closet');\r\n    this.state={\r\n      image: null,\r\n      style: '',\r\n      color: '',\r\n      url: '',\r\n      name: ''\r\n    }\r\n  }\r\n\r\n  onChange = (e) => {\r\n    const state = this.state\r\n    state[e.target.name] = e.target.value;\r\n    this.setState(state);\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    if(e.target.files[0]) {\r\n      this.setState({\r\n        image:e.target.files[0]\r\n\r\n      })\r\n    }\r\n    console.log(e.target.files[0]);\r\n  }\r\n\r\n  handleUpload = e => {\r\n    e.preventDefault();\r\n    // const {image} = this.state;\r\n    // const uploadTask = firebase.storage().ref(`closet/${image.name}`).put(this.state.image)\r\n    // uploadTask.on('state_changed', (snapshot) =>{console.log(snapshot)},\r\n    // (err) => {console.log(err);},\r\n    // () => {firebase.storage().ref('closet').child(image.name).getDownloadURL().then(url => {\r\n    //   this.setState({url});\r\n    // })})\r\n\r\n  }\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault();\r\n    const {image} = this.state;\r\n    const uploadTask = firebase.storage().ref(`closet/${image.name}`).put(this.state.image)\r\n    uploadTask.on('state_changed', (snapshot) =>{console.log(snapshot)},\r\n    (err) => {console.log(err);},\r\n\r\n    //target storage, and folder to get url => setState url\r\n    () => {firebase.storage().ref('closet').child(image.name).getDownloadURL().then(url => {\r\n      this.setState({url});\r\n      console.log(url)\r\n    })})\r\n    .then(url => {\r\n      const {name, style, color} = this.state;\r\n      this.ref.add({\r\n        name,\r\n        style,\r\n        color,\r\n        url:this.state.url\r\n      }).then((docRef) => {\r\n        this.setState({\r\n          name: '',\r\n          style: '',\r\n          url: '' \r\n        });\r\n        // console.log(this.props)\r\n        // console.log(this.state.url)\r\n        // this.props.history.push(\"/\")\r\n      })\r\n      .catch(error => {console.error(\"error adding document\", error);\r\n      })\r\n    })\r\n   \r\n  }\r\n\r\n  render() {\r\n    const {name, style, color} = this.state;\r\n     \r\n    return (\r\n      <>\r\n        <form>\r\n          {/* <input value={input} onChange={event => setInput(event.target.value)} /> */}\r\n          <label htmlFor=\"color\">Color</label> \r\n          <input type=\"text\" className=\"form-color\" name=\"color\" onChange={this.onChange}/>\r\n          \r\n          <label htmlFor=\"style\">style</label>\r\n          <input type=\"text\" className=\"form-style\" name=\"style\" onChange={this.onChange}/>\r\n\r\n          <input className=\"upload-img\" type=\"file\" onChange={this.handleChange} />\r\n          <img src={this.state.url} />\r\n          \r\n          {/* <select className=\"upload-select\" multiple title=\"Choose one of the following...\">\r\n            <option>White</option>\r\n            <option>Black</option>\r\n            <option>Blue</option>\r\n            <option>Navy</option>\r\n            <option>Red</option>\r\n            <option>Yellow</option>\r\n          </select> */}\r\n          <button className=\"upload-cancel\">Cancel</button>\r\n\r\n          <button className=\"upload-submit-img\" onClick={this.handleUpload} >Upload Image First</button>\r\n          <button className=\"upload-submit\" onClick={this.onSubmit} >Submit</button>\r\n\r\n        </form>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Upload;\r\n"]},"metadata":{},"sourceType":"module"}